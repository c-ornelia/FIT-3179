<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pokémon Strip Plot</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
    #vis { background-color: white; border-radius: 8px; padding: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <h1>Pokémon Base Stats Strip Plot</h1>
  <div id="vis"></div>

  <script>
    const spec = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 700,
  "height": 400,
  "background": "#edf2fb",
  "title": {
    "text": {
      "expr": "\"Base Stats by Primary Pokémon Type: \" + (StatSelect == 'base_attack' ? 'Base Attack' : StatSelect == 'base_defense' ? 'Base Defense' : 'Base Stamina')"
    },
    "fontSize": 20,
    "fontWeight": "bold",
    "anchor": "start",
    "offset": 20
  },
  "config": {
    "view": {"stroke": "transparent"},
    "axis": {
      "gridColor": "#dee2e6",
      "gridWidth": 1,
      "labelFontSize": 12,
      "titleFontSize": 14,
      "titleFontWeight": "normal"
    }
  },
  "data": { "url": "csv/base_stats.csv" },
  "params": [
    {
      "name": "StatSelect",
      "value": "base_attack",
      "bind": {
        "input": "select",
        "options": ["base_attack","base_defense","base_stamina"],
        "labels": ["Base Attack","Base Defense","Base Stamina"],
        "name": "Select Stat: "
      }
    },
    {
      "name": "TypeSelect",
      "value": "All",
      "bind": {
        "input": "select",
        "options": ["All", "Bug", "Dark", "Dragon", "Electric", "Fairy", "Fighting", "Fire", "Flying", "Ghost",
                    "Grass", "Ground", "Ice", "Normal", "Poison", "Psychic", "Rock", "Steel", "Water"],
        "name": "Select Type: "
      }
    }
  ],
  "transform": [
    { "calculate": "datum[StatSelect]", "as": "SelectedStatValue" },
    { "filter": "TypeSelect == 'All' || datum.type == TypeSelect" }
  ],
  "layer": [
    {
      "description": "Layer for tick marks",
      "mark": { "type": "tick", "size": 12, "color": "#9381ff" },
      "encoding": {
        "x": {
          "field": "type",
          "type": "nominal",
          "axis": { "title": "Pokémon Type", "labelAngle": -45 },
          "scale": { "paddingInner": 0.3, "paddingOuter": 0.2 }
        },
        "y": {
          "field": "SelectedStatValue",
          "type": "quantitative",
          "axis": {"title": "Stat Value", "labelPadding": 10, "titlePadding": 10},
          "scale": { "zero": false }
        },
        "tooltip": [
          { "field": "pokemon_name", "title": "Pokémon: " },
          { "field": "SelectedStatValue", "title": "Stat Value: " },
          { "field": "type", "title": "Type: " }
        ]
      }
    },
    {
      "description": "Layer for median lines",
      "mark": { "type": "rule", "strokeWidth": 2, "color": "#d90429" },
      "encoding": {
        "x": {
          "field": "type",
          "type": "nominal"
        },
        "y": {
          "aggregate": "median",
          "field": "SelectedStatValue",
          "type": "quantitative"
        }
      }
    }
  ]
};

    vegaEmbed('#vis', spec);
  </script>
</body>
</html>
