<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Best Attackers Bubble Plot — DPS vs TDO</title>

  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@7"></script>

  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin: 24px;
      color: #111;
    }
    h1 {
      font-size: 1.25rem;
      margin-bottom: 8px;
    }
    #vis {
      max-width: 1000px;
    }
    .note {
      color: #555;
      font-size: 0.9rem;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <h1>Best Attackers — DPS vs TDO</h1>
  <div id="vis"></div>
  <div class="note">
    This visualization expects a CSV named <code>attackers.csv</code> in the same folder.
    Columns: <code>Tier, Name, Damage per Second (DPS), Total Damage Output (TDO), Best Moveset, Weather Boost</code>
  </div>

  <script>
    const spec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 800,
      "height": 600,
      "title": "Best Attackers — DPS vs TDO",
      "data": { "url": "csv/attackers.csv" },

      "layer": [
        {
          "mark": { "type": "circle", "filled": true, "size": 200, "opacity": 0.7 },
          "encoding": {
            "x": { "field": "Total Damage Output (TDO)", "type": "quantitative", "title": "Total Damage Output (TDO)" },
            "y": { "field": "Damage per Second (DPS)", "type": "quantitative", "title": "Damage per Second (DPS)" },
            "color": {
              "field": "Tier",
              "type": "nominal",
              "scale": {
                "domain": ["S","A+","B","C","D","F"],
                "range": ["#ffadad","#ffd6a5","#bdb2ff","#b4e1ff","#fad2e1","#eddcd2"]
              },
              "title": "Tier"
            },
            "tooltip": [
              {"field": "Name", "type": "nominal", "title": "Name"},
              {"field": "Tier", "type": "nominal", "title": "Tier"},
              {"field": "Damage per Second (DPS)", "type": "quantitative", "title": "DPS"},
              {"field": "Total Damage Output (TDO)", "type": "quantitative", "title": "TDO"},
              {"field": "Best Moveset", "type": "nominal", "title": "Best Moveset"},
              {"field": "Weather Boost", "type": "nominal", "title": "Weather Boost"}
            ]
          }
        },
        {
          "mark": { "type": "circle", "filled": false, "size": 200, "strokeWidth": 1.5, "opacity": 1 },
          "encoding": {
            "x": { "field": "Total Damage Output (TDO)", "type": "quantitative" },
            "y": { "field": "Damage per Second (DPS)", "type": "quantitative" },
            "stroke": {
              "field": "Tier",
              "type": "nominal",
              "scale": {
                "domain": ["S","A+","B","C","D","F"],
                "range": ["#ff6b6b", "#ffb86b", "#8888ff", "#6fc9ff", "#ff95b8", "#c9c3bd"]
              }
            }
          }
        }
      ],

      "config": {
        "view": { "stroke": "transparent" },
        "axis": { "labelFontSize": 12, "titleFontSize": 13 }
      }
    };

    vegaEmbed("#vis", spec, { actions: { source: false } })
      .then(result => {})
      .catch(console.error);
  </script>
</body>
</html>
