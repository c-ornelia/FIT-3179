<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bubble Plot — DPS vs TDO by Tier</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@7"></script>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin: 24px; }
    h1 { font-size: 1.25rem; margin-bottom: 8px; }
    #vis { max-width: 1000px; }
    .note { color: #555; font-size: 0.9rem; margin-top: 8px; }
  </style>
</head>
<body>
  <h1>Bubble plot — DPS vs TDO, Tier = color</h1>
  <div id="vis"></div>
  <div class="note">CSV expected: <code>attackers.csv</code> with columns: <code>Tier, Name, Damage per Second (DPS), Total Damage Output (TDO), Best Moveset, Weather Boost</code></div>

  <script>
    const spec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 500,
      "height": 400,
      "title": "Best Attackers — DPS vs TDO",
      "data": { "url": "csv/attackers.csv" },

      "mark": { "type": "circle", "size": 100 },
      "encoding": {
        "x": {
          "field": "Total Damage Output (TDO)",
          "type": "quantitative",
          "title": "Total Damage Output (TDO)",
          "axis": {"tickCount": 6}
        },
        "y": {
          "field": "Damage per Second (DPS)",
          "type": "quantitative",
          "title": "Damage per Second (DPS)",
          "axis": {"tickCount": 7}
        },
        "color": {
          "field": "Tier",
          "type": "nominal",
          "scale": {
            "domain": ["S","A","B","C","D","F"],   // <-- explicitly set order
            "range": ["#ffadad", "#ffd6a5", "#bdb2ff", "#b4e1ff", "#fad2e1", "#eddcd2"]
          },
          "title": "Tier"
        },
        "tooltip": [
          {"field": "Name", "type": "nominal", "title": "Name: "},
          {"field": "Tier", "type": "nominal", "title": "Tier: "},
          {"field": "Damage per Second (DPS)", "type": "quantitative", "title": "Damage per Second (DPS): "},
          {"field": "Total Damage Output (TDO)", "type": "quantitative", "title": "Total Damage Output (TDO): "}
        ]
      }
    };

    vegaEmbed('#vis', spec, { actions: { source: false } });
  </script>
</body>
</html>
