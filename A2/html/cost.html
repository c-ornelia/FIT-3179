<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Development Costs Chart</title>

  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
</head>
<body>
  <div id="vis"></div>

  <script>
    const barWidth = 30; // width of bars
    const barColor = "#d0d1ff"; // same color for all bars
    const viewStroke = "transparent"; // chart border/frame
    const gridColor = "#ededed"; // gridline color
    const yAxisTitle = ""; // remove Y-axis title
    const xAxisLabelTitle = "Estimated Cost (USD)"; // custom X-axis label

    const data = [
      {"Component": "Client App & Game Design", "value": 80000, "min": 60000, "max": 100000},
      {"Component": "UI/UX Design", "value": 6500, "min": 6500, "max": 6500},
      {"Component": "Backend Development", "value": 80000, "min": 80000, "max": 80000},
      {"Component": "Server Infrastructure", "value": 150000, "min": 150000, "max": 150000},
      {"Component": "Game Models & Animations", "value": 100000, "min": 100000, "max": 100000},
      {"Component": "Sound Effects", "value": 17500, "min": 15000, "max": 20000},
      {"Component": "QA & Testing", "value": 50000, "min": 50000, "max": 50000},
      {"Component": "Management Costs", "value": 20000, "min": 20000, "max": 20000}
    ];

    const spec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "Development Costs with Ranges",
      "width": 700,
      "height": 400,
      "title": {
        "text": "Approximate Development Costs for Pok√©mon Go",
        "font": "PT Sans",
        "fontSize": 20,
        "fontWeight": "bold",
        "anchor": "middle"
      },
      "config": {
        "view": {"stroke": viewStroke}, // remove chart border
        "axis": {
          "gridColor": gridColor,
          "gridWidth": 1,
          "labelFont": "PT Sans",
          "titleFont": "PT Sans",
          "labelFontSize": 12,
          "titleFontSize": 14,
          "titleFontWeight": "normal"  // axis titles not bold
        }
      },
      "data": {"values": data},
      "layer": [
        // Bars
        {
          "mark": {"type": "bar", "size": barWidth, "color": barColor},
          "encoding": {
            "y": {
              "field": "Component",
              "type": "ordinal",
              "axis": {"title": yAxisTitle, "labelAngle": 0} // remove Y-axis title, keep labels
            },
            "x": {
              "field": "value",
              "type": "quantitative",
              "title": xAxisLabelTitle,
              "scale": {"domainMin": 0}, // start X-axis from 0
               "axis": {"titlePadding": 15}
            },
            "tooltip": [
              {"field": "Component", "type": "nominal", "title": "Component: "},
              {"field": "value", "type": "quantitative", "title": "Estimated Cost (USD): "}
            ]
          }
        },
        // Error Bars for ranges only
        {
          "mark": {"type": "errorbar", "ticks": true, "color": "black"},
          "transform": [
            {"filter": "datum.min !== datum.max"}  // only components with a range
          ],
          "encoding": {
            "y": {"field": "Component", "type": "ordinal"},
            "x": {"field": "min", "type": "quantitative", "title": "Estimated Cost (USD)"},
            "x2": {"field": "max"},
            "tooltip": [
              {"field": "Component", "type": "nominal", "title": "Component: "},
              {"field": "min", "type": "quantitative", "title": "Min Cost (USD): "},
              {"field": "max", "type": "quantitative", "title": "Max Cost (USD): "}
          ]
          }
        }
      ]
    };

    // Load PT Sans first, then render chart
    WebFont.load({
      google: { families: ['PT Sans:400,700'] },
      active: function() {
        vegaEmbed('#vis', spec);
      }
    });
  </script>
</body>
</html>
