{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 715,
  "height": 430,
  "background": "#f4f8ff",
  "title": {
    "text": "Distribution of All Pokémon Base Stats by Type",
    "fontSize": 20,
    "fontWeight": "bold",
    "anchor": "start",
    "offset": 20
  },

  "data": {"url": "csv/base_stats_v2.csv"},

  "resolve": {
    "scale": {"x": "shared", "y": "independent"}
  },

  "params": [
    {
      "name": "statSelect",
      "value": "base_attack",
      "bind": {
        "input": "select",
        "options": ["base_attack", "base_defense", "base_stamina"],
        "labels": ["Base Attack", "Base Defense", "Base Stamina"],
        "name": "Select Stat: "
      }
    },
    {
      "name": "TypeHighlight",
      "select": {"type": "point", "fields": ["type"]},
      "bind": "legend"
    }
  ],

  "layer": [
    {
      "transform": [{"filter": "datum.base_stats == statSelect"}],
      "mark": {"type": "tick", "size": 12},
      "encoding": {
        "x": {
          "field": "type",
          "type": "nominal",
          "axis": {"title": null, "labelAngle": -45},
          "scale": {"domain": ["Normal","Fire","Water","Grass","Electric","Ice","Fighting","Poison","Ground","Flying","Psychic","Bug","Rock","Ghost","Dark","Dragon","Steel","Fairy"], "paddingInner": 0.3, "paddingOuter": 0.2}
        },
        "y": {
          "field": "value",
          "type": "quantitative",
          "axis": {"title": "Stat Value", "labelPadding": 5, "titlePadding": 10},
          "scale": {"zero": false}
        },
        "color": {
          "field": "type",
          "type": "nominal",
          "legend": {
            "title": ["Pokémon Type", "↓ Click to Filter"],
            "symbolStrokeColor": "#472fce",
            "symbolStrokeWidth": 1.5,
            "symbolSize": 100,
            "offset": 24
          },
          "condition": {"param": "TypeHighlight", "value": "#8671fc"},
          "scale": {"range": ["#b7abfd"]}
        },
        "opacity": {
          "condition": {"param": "TypeHighlight", "value": 0.8},
          "value": 0.15
        },
        "tooltip": [
          {"field": "pokemon_name", "title": "Pokémon: "},
          {"field": "value", "title": "Stat Value: "},
          {"field": "type", "title": "Type: "}
        ]
      }
    },

    {
      "data": {
        "values": [
          {"pokemon_name": "Deoxys", "value": 345, "type": "Psychic", "base_stats": "base_attack"}
        ]
      },
      "transform": [{"filter": "datum.base_stats == statSelect"}],
      "mark": {"type": "text", "align": "left", "baseline": "middle", "dx": 8, "dy": -8, "fontSize": 13, "fontWeight": "bold", "color": "#333"},
      "encoding": {
        "x": {"field": "type", "type": "nominal"},
        "y": {"field": "value", "type": "quantitative"},
        "text": {"value": "Deoxys — strongest attacker"}
      }
    }
  ] 
}
